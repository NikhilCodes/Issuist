(this.webpackJsonpissuist=this.webpackJsonpissuist||[]).push([[0],{21:function(e,t,a){e.exports=a.p+"static/media/avatar-person.a9ce91ce.svg"},22:function(e,t,a){e.exports=a(45)},27:function(e,t,a){},33:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(18),l=a.n(c),o=(a(27),a(5)),i=a(7),s=(a(33),a(6)),u=a.n(s),E=a(10),m=a(20),p=a(14),d={apiKey:"AIzaSyBcwT1KYtC838k7VLd729_tXXlsP9W1kuE",authDomain:"issuist.firebaseapp.com",databaseURL:"https://issuist.firebaseio.com",projectId:"issuist",storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FIREBASE_KEY:"AIzaSyBcwT1KYtC838k7VLd729_tXXlsP9W1kuE",REACT_APP_FIREBASE_DOMAIN:"issuist.firebaseapp.com",REACT_APP_FIREBASE_DATABSE:"https://issuist.firebaseio.com",REACT_APP_FIREBASE_PROJECT_ID:"issuist",REACT_APP_FIREBASE_STORAGE_BUCKET:"issuist.appspot.com",REACT_APP_FIREBASE_SENDER_ID:"759041018693",REACT_APP_FIREBASE_APP_ID:"1:759041018693:web:22d32794652e288108cc2c",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-GDE8LWBS71",REACT_APP_FIREBASE_DATABASE:"https://issuist.firebaseio.com"}).REACT_APP_FIRBASE_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FIREBASE_KEY:"AIzaSyBcwT1KYtC838k7VLd729_tXXlsP9W1kuE",REACT_APP_FIREBASE_DOMAIN:"issuist.firebaseapp.com",REACT_APP_FIREBASE_DATABSE:"https://issuist.firebaseio.com",REACT_APP_FIREBASE_PROJECT_ID:"issuist",REACT_APP_FIREBASE_STORAGE_BUCKET:"issuist.appspot.com",REACT_APP_FIREBASE_SENDER_ID:"759041018693",REACT_APP_FIREBASE_APP_ID:"1:759041018693:web:22d32794652e288108cc2c",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-GDE8LWBS71",REACT_APP_FIREBASE_DATABASE:"https://issuist.firebaseio.com"}).REACT_APP_FIRBASE_SENDER_ID,appId:"1:759041018693:web:22d32794652e288108cc2c",measurementId:"G-GDE8LWBS71"},A=new function e(){Object(m.a)(this,e),p.initializeApp(d),this.auth=p.auth()};function b(){return(b=Object(E.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=A.auth.currentUser,e.t0=a,!e.t0){e.next=6;break}return e.next=5,a.getIdToken();case 5:e.t0=e.sent;case 6:if(n=e.t0){e.next=10;break}return console.log("Token Not submitted"),e.abrupt("return",null);case 10:return e.next=12,fetch(t,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(n)}});case 12:return e.next=14,e.sent.json();case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=function(e){return b.apply(this,arguments)};var g=function(){var e=Object(n.useContext)(P),t=Object(o.a)(e,4),a=t[0],c=t[1],l=t[2],s=t[3],m=Object(n.useState)(1),p=Object(o.a)(m,2),d=p[0],b=p[1],g=Object(n.useState)(""),S=Object(o.a)(g,2),h=S[0],f=S[1],T=Object(n.useState)(""),R=Object(o.a)(T,2),v=R[0],O=R[1],I=Object(n.useState)(""),C=Object(o.a)(I,2),j=C[0],x=C[1],y=Object(n.useState)(""),D=Object(o.a)(y,2),N=D[0],k=D[1],B=function(){var e=Object(E.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),v&&j&&(-1!==d||""!==h)){e.next=3;break}return e.abrupt("return");case 3:if(1!==d){e.next=8;break}return e.next=6,A.auth.signInWithEmailAndPassword(v,j).then((function(e){s(e.user)})).catch((function(e){return k(e.message),null}));case 6:e.next=11;break;case 8:if(-1!==d){e.next=11;break}return e.next=11,A.auth.createUserWithEmailAndPassword(v,j).then((function(e){s(e.user),e.user.updateProfile({displayName:h}),console.log("New User Created",l)})).catch((function(e){return k(e.message),null}));case 11:return e.next=13,_("/api/login");case 13:if(e.sent.success){e.next=17;break}return console.log("AUTH WITH API FAILED!"),e.abrupt("return",null);case 17:if(c(!0),localStorage.setItem("isAuthenticated","TRUE"),!N){e.next=23;break}return console.log("Login Done:",l),e.next=23,Object(i.c)("/");case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e){"email"===e.currentTarget.name?O(e.currentTarget.value):"password"===e.currentTarget.name?x(e.currentTarget.value):"full-name"===e.currentTarget.name&&f(e.currentTarget.value)};return a||null===a?r.a.createElement(i.a,{to:"/",noThrow:!0}):r.a.createElement("div",{id:"login-bg"},r.a.createElement("div",{id:"login-form"},r.a.createElement("form",null,r.a.createElement("div",{className:"login-text-input"},r.a.createElement("div",{className:"login-heading"},1===d?"Sign In":"Sign Up"),r.a.createElement("br",null),-1===d?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{name:"full-name",placeholder:"John Watson",type:"text",value:h,onChange:w}),r.a.createElement("br",null),r.a.createElement("br",null)):null,r.a.createElement("input",{name:"email",placeholder:"someone@email.com",type:"email",value:v,onChange:w,autoComplete:"email",required:!0})," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{name:"password",placeholder:"password",type:"password",value:j,onChange:w,required:!0}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("button",{className:"login-submit-button",onClick:B,type:"submit"},1===d?"SIGN IN":"REGISTER")),r.a.createElement("br",null),r.a.createElement("div",{id:"error-text"},N||r.a.createElement(r.a.Fragment,null,"\xa0")),r.a.createElement("div",{style:{padding:"30px 50px",color:"#afafaf"}},"Or Login With"),r.a.createElement("button",{className:"login-google-button",style:{backgroundImage:"url(https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg)"}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),1===d?"Not registered yet":"Already a user",",",r.a.createElement("button",{className:"login-switch-button",onClick:function(){b(-d)}},1===d?"Sign Up":"Sign In")))};function S(){return r.a.createElement("div",{className:"project-card"},r.a.createElement("div",{style:{top:"10%",display:"inline-block",position:"relative",textAlign:"center",width:"100%"}},"+",r.a.createElement("div",{style:{fontSize:"20px"}},"New Project")))}var h=function(e){return r.a.createElement("div",{className:"project-card"},r.a.createElement("h6",null,e.project.projectName),r.a.createElement("div",{style:{fontSize:"20px"}},e.project.projectCode))},f=a(21),T=a.n(f);function R(e){var t=Object(n.useState)(-1),a=Object(o.a)(t,2),c=a[0],l=a[1],i={display:c>0?"block":"none",position:"absolute",right:"40px",backgroundColor:"#f9f9f9",minWidth:"160px",boxShadow:"0px 8px 16px 0px rgba(0,0,0,0.2)",borderRadius:"0 0 5px 5px",zIndex:"1"},s={textAlign:"left",color:"black",padding:"12px 16px",textDecoration:"none",display:"block",cursor:"pointer"},u=r.a.createElement("div",{style:{position:"relative",display:"inline-display",float:"right"}},r.a.createElement("div",{style:i},r.a.createElement("a",{style:s,href:"/terms"},"T&C"),r.a.createElement("a",{style:s,href:"/privacy"},"Privacy Policy"),r.a.createElement("div",{style:s,onClick:e.onLogOutFunc},"Sign Out")));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"app-bar"},r.a.createElement("h2",null,"Issuist"),r.a.createElement("div",{style:{float:"right"},onClick:function(){l(-c)}},e.fullname," \xa0",r.a.createElement("img",{style:{verticalAlign:"middle"},height:"30px",width:"30px",src:e.photoURL?e.photoURL:T.a,alt:""}),r.a.createElement("br",null))),u)}var v=function(){var e=Object(n.useContext)(P),t=Object(o.a)(e,4),a=t[0],c=t[1],l=t[2],s=t[3],m=Object(n.useState)(!0),p=Object(o.a)(m,2),d=p[0],b=p[1],g=Object(n.useState)([]),f=Object(o.a)(g,2),T=f[0],v=f[1],O=function(){var e=Object(E.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.auth.signOut();case 2:return e.next=4,c(!1);case 4:return e.next=6,localStorage.removeItem("isAuthenticated");case 6:return e.next=8,Object(i.c)("/login");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(null===a)A.auth.onAuthStateChanged((function(e){localStorage.getItem("isAuthenticated")?e&&(s(e),_("/api/projects").then((function(e){console.log("made request to projects"),e?"LOGIN_NEEDED"===e.status?(console.log("LOGIN NEEDED"),O().then()):"OK"===e.status?(console.log("PROJECTS_RESPONSE_OK"),"TRUE"===localStorage.getItem("isAuthenticated")&&(c(!0),v(e.projects),b(!1))):"FAIL"===e.status?(console.log("Ran into error!",e.reason),O().then()):console.log("Unknown Status!"):console.log("Empty Response")}))):c(!1)}));else{if(!1===a)return r.a.createElement(i.a,{to:"/login",noThrow:!0});a&&0===T.length&&_("/api/projects").then((function(e){e&&("LOGIN_NEEDED"===e.status?(console.log("LOGIN NEEDED"),O().then(),v(e.projects),b(!1)):"OK"===e.status?"TRUE"===localStorage.getItem("isAuthenticated")?(v(e.projects),b(!1)):O().then():"FAIL"===e.status?(console.log("Ran into error!",e.reason),O().then()):console.log("Unknown Status!"))}))}return a?r.a.createElement("div",{id:"homepage"},r.a.createElement(R,{fullname:l.displayName,onLogOutFunc:O}),r.a.createElement("div",{id:"projects-section"},r.a.createElement("div",{className:"header"},"Your Projects"),r.a.createElement("br",null),r.a.createElement("div",{id:"project-list"},d?r.a.createElement("div",null,"Loading ..."):r.a.createElement("div",null,r.a.createElement(S,null),T.map((function(e){return r.a.createElement(h,{key:e._id,project:e})})))))):null};var O=function(){return r.a.createElement("div",{style:{color:"black",height:"100%",width:"100%",position:"absolute"}},r.a.createElement("div",{style:{top:"40%",position:"relative"}},"404 Not Found!"))},P=Object(n.createContext)(null);var I=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)({}),s=Object(o.a)(l,2),u=s[0],E=s[1];return r.a.createElement(P.Provider,{value:[a,c,u,E]},r.a.createElement("div",{className:"App"},r.a.createElement(i.b,{id:"router"},r.a.createElement(v,{path:"/"}),r.a.createElement(g,{path:"/login"}),r.a.createElement(O,{default:!0}))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.198a5f6f.chunk.js.map